<div>
    <h2 class="text-2xl font-bold mb-6">Scriptor 模块</h2>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- 配置表单 -->
        <div>
            <form id="scriptor-form" class="space-y-4">
                <!-- 数字输入组 -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Dilation Time</label>
                        <input type="number" name="dilation_time" value="1000000" 
                               min="1000000" max="1005000" 
                               class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Correction Time</label>
                        <input type="number" name="correction_time" value="-45000" 
                               class="w-full p-2 border rounded">
                    </div>
                </div>

                <!-- 端口配置 -->
                <div class="grid grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Mumu Port</label>
                        <input type="number" name="mumu_port" value="7555" 
                               min="1024" max="65535" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Server Port</label>
                        <input type="number" name="server_port" value="31415" 
                               min="1024" max="65535" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Bangcheater Port</label>
                        <input type="number" name="bangcheater_port" value="12345" 
                               min="1024" max="65535" class="w-full p-2 border rounded">
                    </div>
                </div>

                <!-- 布尔选项组 -->
                <div class="grid grid-cols-2 gap-4">
                    <label class="flex items-center">
                        <input type="checkbox" name="is_no_action" class="mr-2">
                        <span>No Action</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="is_caliboration" class="mr-2">
                        <span>Calibration</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="is_play_one_song" class="mr-2">
                        <span>Play One Song</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="is_restart_play" checked class="mr-2">
                        <span>Restart Play</span>
                    </label>
                </div>

                <!-- 枚举选择 -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Mode</label>
                        <select name="mode" class="w-full p-2 border rounded">
                            <option value="Free">Free</option>
                            <option value="Collaborate">Collaborate</option>
                            <option value="Stage">Stage</option>
                            <option value="Event" selected>Event</option>
                            <option value="Story">Story</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Event</label>
                        <select name="event" class="w-full p-2 border rounded">
                            <option value="Compete" selected>Compete</option>
                            <option value="Team">Team</option>
                            <option value="Tour">Tour</option>
                            <option value="Challenge">Challenge</option>
                            <option value="Trial">Trial</option>
                            <option value="Mission">Mission</option>
                        </select>
                    </div>
                </div>

                <!-- 更多配置项... -->
            </form>

            <!-- 控制按钮 -->
            <div class="mt-6 flex space-x-4">
                <button onclick="startScriptor()" 
                        class="px-6 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                    启动
                </button>
                <button onclick="stopScriptor()" 
                        class="px-6 py-2 bg-red-500 text-white rounded hover:bg-red-600">
                    停止
                </button>
            </div>
        </div>

        <!-- 日志显示 -->
        <div>
            <h3 class="text-lg font-semibold mb-2">日志输出</h3>
            <div id="scriptor-logs" class="log-area bg-black text-green-400 p-3 rounded overflow-y-auto">
                <!-- 日志将通过WebSocket动态添加 -->
            </div>
        </div>
    </div>
</div>

<script>
    function startScriptor() {
        const form = document.getElementById('scriptor-form');
        const formData = new FormData(form);
        const config = Object.fromEntries(formData.entries());
        
        // 转换布尔值
        config.is_no_action = formData.has('is_no_action');
        config.is_caliboration = formData.has('is_caliboration');
        // ... 其他布尔值转换
        
        htmx.ajax('POST', '/api/scriptor/start', {
            values: config,
            swap: 'none'
        }).then(() => {
            // 启动成功的处理
        });
    }

    function stopScriptor() {
        htmx.ajax('POST', '/api/scriptor/stop', {
            swap: 'none'
        });
    }
</script>